<!DOCTYPE HTML>
<!--
	Dimension by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Dimension by HTML5 UP</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
		<style>
		    .kpi-grid {
			display: grid;
			grid-template-columns: repeat(4, 1fr);
			gap: 20px;
			margin-bottom: 30px;
			}
			.kpi-card {
				background: rgba(0, 0, 0, 0.623);
				padding: 20px;
				border-radius: 10px;
				box-shadow: 0 2px 4px rgba(0,0,0,0.1);
				text-align: center;
			}
			.kpi-title { font-size: 14px; color: #ffffff; }
			.kpi-value { font-size: 32px; font-weight: bold; margin: 10px 0; color: #024873; }
			.kpi-sub { color: #ffffff; font-size: 13px; }

			/* Mini-bar chart */
			.chart {
				display: flex;
				height: 60px;
				align-items: flex-end;
				gap: 4px;
				margin-top: 5px;
			}
			.bar {
				width: 12px;
				background: #438ec9;
				border-radius: 3px;
			}

			/* Section */
			.section {
				background: rgba(0, 0, 0, 0.623);
				padding: 20px;
				border-radius: 10px;
				box-shadow: 0 2px 4px rgba(0,0,0,0.1);
				margin-top: 25px;
			}
			.asset-form input { margin: 5px; padding: 5px; }
			table { width: 100%; border-collapse: collapse; margin-top: 15px; }
			th, td { padding: 8px; border: 1px solid #ccc; text-align: left; }
			th { background: #024873; color: #fff; }
			.actions button { margin-right: 5px; }
			#search { margin-bottom: 10px; padding: 6px; width: 300px; }
		</style>
	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">

						<nav>
							<ul>
								<li><a href="resurssien-hallinta.html#wrap">Resurssien hallinta</a></li>
								<li><a href="#kpi-ohjauspaneeli">KPI Ohjauspaneeli</a></li>
								<li><a href="#Muutostilaukset">Muutostilaukset</a></li>
								<li><a href="#contact">Contact</a></li>
								<!--<li><a href="#elements">Elements</a></li>-->
							</ul>
						</nav>
					</header>

				<!-- Main -->
					<div id="main">

						<!-- KPI Dashboar -->
							<article id="kpi-ohjauspaneeli">
								<h2>KPI Ohjauspaneeli</h2>
								<!-- KPI CARDS -->
								<div class="kpi-grid">
									<div class="kpi-card">
										<div class="kpi-title">Kuukausituotanto</div>
										<div class="kpi-value" id="kpiOutput">0</div>
										<div class="kpi-sub">Valmistuneet ter√§sosat</div>
									</div>

									<div class="kpi-card">
										<div class="kpi-title">Keskim. tuotannon viiv√§stys</div>
										<div class="kpi-value" id="kpiDelay">0pv</div>
										<div class="kpi-sub">Per kokoonpanolohko</div>
									</div>

									<div class="kpi-card">
										<div class="kpi-title">Turvallisuustapaukset</div>
										<div class="kpi-value" id="kpiSafety">0</div>
										<div class="kpi-sub">T√§ss√§ kuussa</div>
									</div>

									<div class="kpi-card">
										<div class="kpi-title">Kassavirran kulutusaste</div>
										<div class="kpi-value" id="kpiBudget">0%</div>
										<div class="kpi-sub">Projekti 011-FR</div>
									</div>
								</div>

								<!-- MINI CHART SECTION -->
								<div class="section">
									<h3>üìà Tuotantotrendi (Viimeiset 8 viikkoa)</h3>
									<div class="chart" id="trendChart"></div>
								</div>

								<!-- DATA TABLE SECTION -->
								<div class="section">
									<h3>‚öô Viimeaikaiset toimintamittarit</h3>
									<table border="1" width="100%" style="border-collapse:collapse; margin-top:10px;">
										<thead style="background:#024873; color:white;">
											<tr>
												<th>Viikko</th>
												<th>Valmistuneet osat</th>
												<th>Keskim. viiv√§stys (p√§ivin√§)</th>
												<th>Turvallisuustapaukset</th>
												<th>Budjetti</th>
											</tr>
										</thead>
										<tbody id="dataTable"></tbody>
									</table>
								</div>

								<script>
								/* ---------------------------------------------------------
								Example Shipyard KPI Data (integrated)
								--------------------------------------------------------- */
								const kpiData = {
									output: 342,
									delay: 1.8,
									safety: 2,
									budget: 68,

									weeklyTrend: [35, 42, 30, 48, 51, 44, 57, 35],

									table: [
										{ week: "W01", sections: 35, delay: 2.0, safety: 1, budget: 61 },
										{ week: "W02", sections: 42, delay: 1.4, safety: 0, budget: 63 },
										{ week: "W03", sections: 30, delay: 2.2, safety: 0, budget: 64 },
										{ week: "W04", sections: 48, delay: 1.7, safety: 1, budget: 66 },
										{ week: "W05", sections: 51, delay: 1.5, safety: 0, budget: 67 },
										{ week: "W06", sections: 44, delay: 2.1, safety: 0, budget: 68 },
										{ week: "W07", sections: 57, delay: 1.2, safety: 0, budget: 68 },
										{ week: "W08", sections: 35, delay: 2.3, safety: 1, budget: 68 }
									]
								};

								/* ---------------------------------------------------------
								Render KPIs
								--------------------------------------------------------- */
								document.getElementById("kpiOutput").textContent = kpiData.output;
								document.getElementById("kpiDelay").textContent = kpiData.delay + "pv";
								document.getElementById("kpiSafety").textContent = kpiData.safety;
								document.getElementById("kpiBudget").textContent = kpiData.budget + "%";

								/* ---------------------------------------------------------
								Render Mini Trend Chart
								--------------------------------------------------------- */
								const maxVal = Math.max(...kpiData.weeklyTrend);
								const chart = document.getElementById("trendChart");

								kpiData.weeklyTrend.forEach(v => {
									const bar = document.createElement("div");
									bar.className = "bar";
									bar.style.height = (v / maxVal * 60) + "px";
									chart.appendChild(bar);
								});

								/* ---------------------------------------------------------
								Render Operational Table
								--------------------------------------------------------- */
								const tbody = document.getElementById("dataTable");

								kpiData.table.forEach(row => {
									const tr = document.createElement("tr");
									tr.innerHTML = `
										<td>${row.week}</td>
										<td>${row.sections}</td>
										<td>${row.delay}</td>
										<td>${row.safety}</td>
										<td>${row.budget}%</td>
									`;
									tbody.appendChild(tr);
								});
								</script>
							</article>

						<!-- Muutostilaukset -->
							<article id="Muutostilaukset">
								<h2>Muutostilaukset</h2>
    
								<label for="statusDropdown">Tilanne:</label>
								<select id="statusDropdown">
									<option value="">Kaikki</option>
								</select>

								<label for="areaDropdown">Alue:</label>
								<select id="areaDropdown">
									<option value="">Kaikki</option>
								</select>

								<label for="searchInput">Haku (COD tai Tiedonala):</label>
								<input type="text" id="searchInput" placeholder="Kirjoita hakusana">
								
								<table id="changeOrdersTable">
									<thead>
										<tr>
											<th>COD</th>
											<th>Alue</th>
											<th>Tiedonala</th>
											<th>Tilanne</th>
											<th>P√§iv√§ys <button id="sortDateBtn">‚Üï</button></th>
										</tr>
									</thead>
									<tbody></tbody>
								</table>

								<script>
									const csvData = `
									COD,Area,Discipline,Status,Date
									CO-01,Area A,Electrical,Open,2025-11-02
									CO-02,Area B,Piping,In Progress,2025-11-03
									CO-03,Area C,Civil,Closed,2025-11-04
									CO-04,Area A,Mechanical,Open,2025-11-05
									`.trim();

									let allRows = [];
									let sortAsc = false;

									function parseCSV() {
										const rows = csvData.split("\n");
										allRows = rows.slice(1).map(row => row.split(","));
										populateDropdowns();
										renderTable(allRows);
									}

									function populateDropdowns() {
										const statuses = [...new Set(allRows.map(row => row[3]))];
										const areas = [...new Set(allRows.map(row => row[1]))];

										const statusDropdown = document.getElementById("statusDropdown");
										statuses.forEach(status => {
											const option = document.createElement("option");
											option.value = status;
											option.textContent = status;
											statusDropdown.appendChild(option);
										});

										const areaDropdown = document.getElementById("areaDropdown");
										areas.forEach(area => {
											const option = document.createElement("option");
											option.value = area;
											option.textContent = area;
											areaDropdown.appendChild(option);
										});
									}

									function renderTable(data) {
										const tbody = document.querySelector("#changeOrdersTable tbody");
										tbody.innerHTML = "";
										data.forEach(cols => {
											const tr = document.createElement("tr");
											cols.forEach((col, index) => {
												const td = document.createElement("td");
												td.textContent = col;
												if (index === 3) td.classList.add(getStatusClass(col));
												tr.appendChild(td);
											});
											tbody.appendChild(tr);
										});
									}

									function getStatusClass(status) {
										switch (status.toLowerCase()) {
											case "open": return "status-open";
											case "in progress": return "status-inprogress";
											case "closed": return "status-closed";
											default: return "";
										}
									}

									function applyFilters() {
										const selectedStatus = document.getElementById("statusDropdown").value;
										const selectedArea = document.getElementById("areaDropdown").value;
										const searchValue = document.getElementById("searchInput").value.toLowerCase();

										let filteredRows = allRows;
										if (selectedStatus) {
											filteredRows = filteredRows.filter(row => row[3] === selectedStatus);
										}
										if (selectedArea) {
											filteredRows = filteredRows.filter(row => row[1] === selectedArea);
										}
										if (searchValue) {
											filteredRows = filteredRows.filter(row =>
												row[0].toLowerCase().includes(searchValue) || // COD
												row[2].toLowerCase().includes(searchValue)    // Discipline
											);
										}
										renderTable(filteredRows);
									}

									document.getElementById("statusDropdown").addEventListener("change", applyFilters);
									document.getElementById("areaDropdown").addEventListener("change", applyFilters);
									document.getElementById("searchInput").addEventListener("input", applyFilters);

									document.getElementById("sortDateBtn").addEventListener("click", function() {
										sortAsc = !sortAsc;
										allRows.sort((a, b) => {
											const dateA = new Date(a[4]);
											const dateB = new Date(b[4]);
											return sortAsc ? dateA - dateB : dateB - dateA;
										});
										applyFilters();
									});

									parseCSV();
								</script>
							</article>
					</div>

					

					

				<!-- Footer -->
					<footer id="footer">
						<p class="copyright">&copy; Untitled. Design: <a href="https://html5up.net">HTML5 UP</a>.</p>
					</footer>

			</div>

		<!-- BG -->
			<div id="bg"></div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>
